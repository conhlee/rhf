#include "Script/AgbTap.hpp"

#include "AgbTap/MyFlowDecl.hpp"

#include "Script/Prologue.hpp"

#include "TickFlow.hpp"

#include "SceneManager.hpp"

#include "CheckPointManager.hpp"

#include "rev_tengoku.rsid"

// TODO: fix undefined commands (usage of TFD_CMD)

GRADE_CRITERIA_TABLE_BEGIN(lbl_802EF268)
    GRADE_CRITERIA_TABLE_ENTRY("0303100", "0303101", 0x8046, 0x8032, 0x801E, GRADE_CRITERIA_FLAG_UNK0)
    GRADE_CRITERIA_TABLE_ENTRY("0303110", "0303111", 0x8046, 0x8028, 0x803C, GRADE_CRITERIA_FLAG_NONE)
    GRADE_CRITERIA_TABLE_ENTRY("0303120", "0303121", 0x8046, 0x801E, 0x8032, GRADE_CRITERIA_FLAG_NONE)
    GRADE_CRITERIA_TABLE_ENTRY(NULL, "0303130", 0x8065, 0x0000, 0x0000, GRADE_CRITERIA_FLAG_NONE)
GRADE_CRITERIA_TABLE_END()

TFD_EXTERN(lbl_801F96A8)
TFD_EXTERN(lbl_801F97E0)

// Forward declaration
TFD_EXTERN(lbl_802641A0)

TFD_BEGIN(lbl_80263C90)
    TFC_SET_SCENE_VER(eScene_AgbTap, 0)
    TFC_SET_SCENE(eScene_AgbTap, lbl_802641A0)
TFD_STOP()

TFD_BEGIN(lbl_80263CAC)
    TFC_CATEGORY(0)
    TFC_SND_LOADING_BEGIN()
    TFC_REST(48)
    TFC_LOAD_SND_GROUP_1(GROUP_WSD_AGB_TAP_DANCE)
    TFC_CALL(lbl_802E4CE8)
    TFC_LOAD_SND_GROUP_1(GROUP_WSD_TUTORIAL_OLD_110)
    TFC_CALL(lbl_802E4CE8)
    TFC_LOAD_SND_GROUP_2(GROUP_AGB_TAP)
    TFC_CALL(lbl_802E4CE8)
    TFC_SND_LOADING_END()
    TFC_SET_SCENE_VER(eScene_AgbTap, 0)
    TFC_LOAD_SCENE_ASSETS(eScene_AgbTap)
TFD_STOP()

TFD_BEGIN(lbl_80263D10)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Ready_L)
    TFC_AGBTAP_INPUT()
    TFC_REST(48)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_0L)
    TFC_REST(48)
TFD_RETURN()

TFD_BEGIN(lbl_80263D30)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Ready_R)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Ready_2)
    TFC_AGBTAP_INPUT()
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Ready_2)
    TFC_AGBTAP_INPUT()
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_0R)
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_0R)
    TFC_REST(24)
TFD_RETURN()

TFD_BEGIN(lbl_80263D78)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Crouch)
    TFC_REST(48)
TFD_RETURN()

TFD_BEGIN(lbl_80263D88)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Jump)
    TFC_AGBTAP_INPUT()
    TFC_REST(48)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Land)
    TFC_REST(48)
TFD_RETURN()

TFD_BEGIN(lbl_80263DA8)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Jump_Last)
    TFC_AGBTAP_INPUT()
    TFC_REST(48)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Pause)
    TFC_REST(48)
TFD_RETURN()

TFD_BEGIN(lbl_80263DC8)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Charge)
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Ready_3_2)
    TFC_REST(24)
    TFC_AGBTAP_INPUT()
    TFC_REST(24)
    TFC_AGBTAP_INPUT()
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_1L)
    TFC_AGBTAP_INPUT()
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_1R)
    TFC_REST(24)
    TFC_AGBTAP_SET_ANIME_MONKEY(eAgbTapMove_Tap_1L)
    TFC_REST(48)
TFD_RETURN()

TFD_BEGIN(lbl_80263E20)
    TFC_CATEGORY(0)
    TFC_PREPARE_WAVE(WSD_TUTORIAL_OLD_110)
    TFC_REST_FRAMES(50)
    TFC_UI_SKIP_POS(3)
    TFC_UI_SKIP_ANIM_PRACTICE()
    TFC_SET_SKIPPABLE(TRUE)
    TFC_SET_SKIP_HANDLER(lbl_80263C90)
    TFC_REST(96)
    TFC_SET_INPUT_ALLOW_ALL(TRUE)
    TFC_AGBTAP_SET_BALLOON_TARGET_MONKEYS()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084000")
    TFC_REST(48)
    TFC_REST(48)
    TFC_START_PREPARED_WAVE()
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_REST(48)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084001")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084002")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_TUTORIAL_RESET_COUNTER()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_LABEL(100)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_TUTORIAL_INCR_COUNTER_IF_NOT_MISSED()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_TUTORIAL_GET_COUNTER()
    TFC_IF_LT(1) // if X is zero, jump back
        TFC_JUMP(100)
    TFC_ENDIF()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084003")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_TUTORIAL_RESET_COUNTER()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_LABEL(200)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_TUTORIAL_INCR_COUNTER_IF_NOT_MISSED()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_TUTORIAL_GET_COUNTER()
    TFC_IF_LT(1)
        TFC_JUMP(200)
    TFC_ENDIF()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084004")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_TUTORIAL_RESET_COUNTER()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_LABEL(300)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_REST(48)
    TFC_TUTORIAL_INCR_COUNTER_IF_NOT_MISSED()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_TUTORIAL_GET_COUNTER()
    TFC_IF_LT(1)
        TFC_JUMP(300)
    TFC_ENDIF()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084005")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_TUTORIAL_RESET_COUNTER()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_LABEL(400)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263DC8)
    TFC_TUTORIAL_INCR_COUNTER_IF_NOT_MISSED()
    TFC_TUTORIAL_RESET_MISSED()
    TFC_TUTORIAL_GET_COUNTER()
    TFC_IF_LT(1)
        TFC_JUMP(400)
    TFC_ENDIF()
    TFC_SET_SKIPPABLE(FALSE)
    TFC_SET_WAVE_VOLUME(0, 192)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084006")
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_STOP_WAVE(120)
    TFC_SET_SKIPPABLE(FALSE)
    TFC_ASYNC_CALL(lbl_802641A0, 0)
TFD_STOP()

TFD_BEGIN(lbl_802641A0)
    TFC_CATEGORY(0)
    TFC_PREPARE_WAVE(WSD_AGB_TAP_DANCE)
    TFC_TEMPO_WAVE(WSD_AGB_TAP_DANCE)
    TFC_SPEED(256)
    TFD_CMD(0x120, 0, 0),
    TFC_SET_INPUT_ALLOW_ALL(FALSE)
    TFD_CMD(0x045, 1, 0), 0,
    TFC_RESET_TICK_PASS()
    TFC_ICI_START()
    TFC_CHECKPOINT_SUBMIT_CRITERIA(lbl_802EF268)
    TFD_CMD(0x11B, 1, 0), 3,
    TFC_CHECKPOINT_SCORING_START()
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_REST(96)
    TFC_CALL(lbl_802E4CC0)
    TFC_START_PREPARED_WAVE()
    TFC_REST(0)
    TFC_REST(48)
    TFC_REST(48)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_AGBTAP_SET_BALLOON_TARGET_MONKEYS()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084007 ")
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBTAP_GIRAFFE_MOVE_OUT()
    TFC_REST(48)
    TFC_AGBTAP_SET_BALLOON_TARGET_GIRAFFE()
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084008")
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_SET_INPUT_ALLOW_ALL(TRUE)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D30)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263DC8)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_RESET_PERFORMANCE()
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_GIRAFFE_ANIM_GOOD(0)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_GIRAFFE_ANIM_NORMAL()
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D30)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263DC8)
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_RESET_PERFORMANCE()
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80263D30)
    TFC_AGBTAP_GIRAFFE_ANIM_GOOD(0)
    TFC_CALL(lbl_80263D30)
    TFC_AGBTAP_GIRAFFE_ANIM_NORMAL()
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_80263DC8)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_AGBTAP_RESET_PERFORMANCE()
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263DC8)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_GIRAFFE_ANIM_GOOD(1)
    TFC_CALL(lbl_80263D78)
    TFC_AGBTAP_GIRAFFE_ANIM_NORMAL()
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263D88)
    TFC_CALL(lbl_80263DA8)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_AGBTAP_RESET_PERFORMANCE()
    TFC_CALL(lbl_80263DC8)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263DC8)
    TFC_CALL(lbl_80263D30)
    TFC_AGBTAP_GIRAFFE_ANIM_GOOD(2)
    TFC_CALL(lbl_80263D10)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBTAP_GIRAFFE_ANIM_NORMAL()
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_80263DC8)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D30)
    TFC_CALL(lbl_80263D10)
    TFC_CALL(lbl_80263D10)
    TFC_AGBTAP_BEAT_ANIM()
    TFC_REST(48)
    TFC_CALL(lbl_80263D78)
    TFC_CALL(lbl_80263DA8)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0084009")
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFD_CMD(0x044, 1, 0), 0,
    TFC_SET_INPUT_ALLOW_ALL(FALSE)
    TFD_CMD(0x045, 1, 0), 0,
    TFC_CHECKPOINT_SUBMIT_CRITERIA_END(lbl_802EF268, "agbTap", 0)
    TFC_ICI_END("agbTap", 0)
    TFC_CHECKPOINT_SCORING_STOP()
    TFC_CHECKPOINT_DO_GRADING()
    TFC_FADE_OUT_FRAMES(16)
    TFC_REST_FRAMES(60)
    TFC_CELLANIM_RENDER_EFF_RESET()
    TFC_RESET_SND_GROUP_HEAP_0()
    TFC_RESET_SND_GROUP_HEAP_1()
    TFC_RESET_SND_GROUP_HEAP_2()
    TFC_RESET_SND_GROUP_HEAP_3()
    TFC_SET_GRADING_CAPTION("0303000")
    TFC_CALL(lbl_801F97E0)
    TFC_SET_EPILOGUE_MSG_OK("0303200")
    TFC_SET_EPILOGUE_MSG_TRYAGAIN("0303201")
    TFC_SET_EPILOGUE_MSG_SUPERB("0303202")
    TFC_SET_EPILOGUE("agbTap", 0)
    TFC_CALL(lbl_801F96A8)
    TFC_100_1()
TFD_STOP()

TFD_BEGIN(lbl_802647D0)
    TFC_CATEGORY(0)
    TFC_TEMPO(120)
    TFC_SPEED(256)
    TFC_RESET_SND_GROUP_HEAP_0()
    TFC_RESET_SND_GROUP_HEAP_1()
    TFC_RESET_SND_GROUP_HEAP_2()
    TFC_RESET_SND_GROUP_HEAP_3()
    TFC_CALL(lbl_801F9304)
    TFC_ASYNC_CALL(lbl_80263CAC, 0)
    TFC_SET_PROLOGUE("agbTap", 0)
    TFC_SET_PROLOGUE_JINGLE(PROLOGUE_JINGLE_AGB_TAP_DANCE)
    TFC_CALL(lbl_801F9340)
    TFC_SET_SCENE_VER(eScene_AgbTap, 0)
    TFC_SET_SCENE(eScene_AgbTap, lbl_80263E20)
TFD_STOP()
