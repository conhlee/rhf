#include "Script/AgbGhost.hpp"

#include "AgbGhost/MyFlowDecl.hpp"

#include "Script/Prologue.hpp"

#include "TickFlow.hpp"

#include "SceneManager.hpp"

#include "CheckPointManager.hpp"

#include "rev_tengoku.rsid"

// TODO: fix undefined commands (usage of TFD_CMD)

GRADE_CRITERIA_TABLE_BEGIN(lbl_802EF2B8)
    GRADE_CRITERIA_TABLE_ENTRY(NULL, "0301100", 0x8065, 0x801E, 0x8032, GRADE_CRITERIA_FLAG_UNK0)
    GRADE_CRITERIA_TABLE_ENTRY("0301110", "0301111", 0x8032, 0x800A, 0x0001, GRADE_CRITERIA_FLAG_NONE)
    GRADE_CRITERIA_TABLE_ENTRY("0301120", "0301121", 0x8046, 0x801E, 0x0001, GRADE_CRITERIA_FLAG_NONE)
    GRADE_CRITERIA_TABLE_ENTRY("0301130", NULL, 0x8064, 0x0000, 0x8065, GRADE_CRITERIA_FLAG_NONE)
GRADE_CRITERIA_TABLE_END()

TFD_EXTERN(lbl_801F96A8)
TFD_EXTERN(lbl_801F97E0)

// Forward declaration
TFD_EXTERN(lbl_80265120)

TFD_BEGIN(lbl_80264840)
    TFC_SET_SCENE_VER(eScene_AgbGhost, 0)
    TFC_SET_SCENE(eScene_AgbGhost, lbl_80265120)
TFD_STOP()

TFD_BEGIN(lbl_8026485C)
    TFC_CATEGORY(0)
    TFC_SND_LOADING_BEGIN()
    TFC_REST(48)
    TFC_LOAD_SND_GROUP_1(GROUP_WSD_AGB_SHIROI_OBAKE)
    TFC_CALL(lbl_802E4CE8)
    TFC_LOAD_SND_GROUP_1(GROUP_WSD_AGB_SHIROI_OBAKE_TUTORIAL)
    TFC_CALL(lbl_802E4CE8)
    TFC_LOAD_SND_GROUP_2(GROUP_AGB_AIM)
    TFC_CALL(lbl_802E4CE8)
    TFC_SND_LOADING_END()
    TFC_SET_SCENE_VER(eScene_AgbGhost, 0)
    TFC_LOAD_SCENE_ASSETS(eScene_AgbGhost)
TFD_STOP()

TFD_BEGIN(lbl_802648C0)
    TFC_AGBGHOST_RAIN_SOUND_PAUSE()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_BOWARROW_DRAW()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_AGBGHOST_INPUT_NORMAL()
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_REST(48)
    TFC_AGBGHOST_DOOR_ANIM_CLOSE()
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_SPEED(256)
TFD_RETURN()

TFD_BEGIN(lbl_80264988)
    TFC_AGBGHOST_RAIN_SOUND_PAUSE()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_BOWARROW_DRAW()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(160)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(80)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_AGBGHOST_INPUT_RELAXED()
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_REST(48)
    TFC_AGBGHOST_DOOR_ANIM_CLOSE()
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_SPEED(256)
TFD_RETURN()

TFD_BEGIN(lbl_80264A50)
    TFC_AGBGHOST_RAIN_SOUND_PAUSE()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(192)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(128)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_BOWARROW_DRAW()
    TFC_AGBGHOST_GHOST_HEIGHT(80)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(32)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_AGBGHOST_INPUT_VERYRELAXED()
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_REST(48)
    TFC_AGBGHOST_DOOR_ANIM_CLOSE()
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_SPEED(256)
TFD_RETURN()

TFD_BEGIN(lbl_80264B18)
    TFC_AGBGHOST_RAIN_SOUND_PAUSE()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(160)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(80)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_BOWARROW_DRAW()
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(0)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_AGBGHOST_INPUT_VERYRELAXED()
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_REST(48)
    TFC_AGBGHOST_DOOR_ANIM_CLOSE()
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_SPEED(256)
TFD_RETURN()

TFD_BEGIN(lbl_80264BE0)
    TFC_CATEGORY(0)
    TFC_AGBGHOST_BOWARROW_SLIDE_IN(300, 96)
    TFC_SET_INPUT_ALLOW_ALL(FALSE)
    TFC_REST_FRAMES(50)
    TFC_UI_SKIP_POS(3)
    TFC_UI_SKIP_ANIM_PRACTICE()
    TFC_SET_SKIPPABLE(TRUE)
    TFC_SET_SKIP_HANDLER(lbl_80264840)
    TFC_PREPARE_WAVE(WSD_AGB_SHIROI_OBAKE_TUTORIAL)
    TFC_CALL(lbl_802E4CC0)
    TFC_START_PREPARED_WAVE()
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082000")
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_PRECISE()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082001")
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_PRECISE()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082002")
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_PRECISE()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082003")
    TFC_AGBGHOST_RAIN_SET_MOTION_ON_SLOW()
    TFC_AGBGHOST_RAIN_FALL_SLOW()
    TFC_AGBGHOST_GHOST_ANIM_TIMING_INST()
    TFC_SPEED(85)
    TFC_SET_WAVE_VOLUME(0, 1)
    TFC_PLAY_SFX(SE_AGB_AIM_KOKO)
    TFC_REST(24)
    TFC_SPEED(256)
    TFC_SET_WAVE_VOLUME(256, 60)
    TFC_REST(24)
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_AGBGHOST_RAIN_SET_PAUSE_ON_SLOW()
    TFC_AGBGHOST_GHOST_ANIM_TIMING_DASH()
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082004")
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_PRECISE()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082005")
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082006")
    TFC_AGBGHOST_RAIN_SET_MOTION_ON_SLOW()
    TFC_AGBGHOST_RAIN_FALL_SLOW()
    TFC_AGBGHOST_GHOST_ANIM_TIMING_INST()
    TFC_SPEED(85)
    TFC_SET_WAVE_VOLUME(0, 1)
    TFC_PLAY_SFX(SE_AGB_AIM_KOKO)
    TFC_REST(24)
    TFC_SPEED(256)
    TFC_SET_WAVE_VOLUME(256, 60)
    TFC_REST(24)
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_AGBGHOST_RAIN_SET_PAUSE_ON_SLOW()
    TFC_AGBGHOST_GHOST_ANIM_TIMING_DASH()
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, TRUE)
    TFC_MESG_PANE_SET_TEXT(0, "0082007")
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_SET_SKIPPABLE(FALSE)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_PRECISE()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_REST(48)
    TFC_SET_INPUT_ALLOW_ALL(TRUE)
    TFC_AGBGHOST_RAIN_SOUND_PAUSE()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_AGBGHOST_GHOST_ANIM_STEP(0)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(1)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(2)
    TFC_REST(48)
    TFC_MESG_PANE_VISIBLE(0, FALSE)
    TFC_AGBGHOST_BOWARROW_DRAW()
    TFC_AGBGHOST_GHOST_ANIM_STEP(3)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(4)
    TFC_REST(48)
    TFC_AGBGHOST_GHOST_ANIM_STEP(5)
    TFC_REST(48)
    TFC_AGBGHOST_INPUT_NORMAL()
    TFC_AGBGHOST_GHOST_ANIM_STEP(6)
    TFC_REST(48)
    TFC_AGBGHOST_RAIN_SOUND_PLAY()
    TFC_AGBGHOST_GHOST_HEIGHT(256)
    TFC_REST(48)
    TFC_AGBGHOST_DOOR_ANIM_CLOSE()
    TFC_AGBGHOST_RAIN_FALL_NORMAL()
    TFC_SPEED(256)
    TFC_TUTORIAL_SEAMLESS_FINISH()
    TFC_ASYNC_CALL(lbl_80265120, 0)
TFD_STOP()

TFD_BEGIN(lbl_80265120)
    TFC_TUTORIAL_GET_SEAMLESS_FINISHED()
    TFC_IF_NEQ(FALSE)
        TFC_CATEGORY(0)
        TFD_CMD(0x120, 0, 0),
        TFD_CMD(0x045, 1, 0), 0,
        TFC_RESET_TICK_PASS()
        TFC_ICI_START()
        TFC_CHECKPOINT_SUBMIT_CRITERIA(lbl_802EF2B8)
        TFD_CMD(0x11B, 1, 0), 0,
        TFC_CHECKPOINT_SCORING_START()
        TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_ELSE()
        TFC_CATEGORY(0)
        TFC_PREPARE_WAVE(WSD_AGB_SHIROI_OBAKE)
        TFC_TEMPO_WAVE(WSD_AGB_SHIROI_OBAKE)
        TFC_SPEED(256)
        TFD_CMD(0x120, 0, 0),
        TFC_SET_INPUT_ALLOW_ALL(FALSE)
        TFD_CMD(0x045, 1, 0), 0,
        TFC_RESET_TICK_PASS()
        TFC_ICI_START()
        TFC_CHECKPOINT_SUBMIT_CRITERIA(lbl_802EF2B8)
        TFD_CMD(0x11B, 1, 0), 0,
        TFC_CHECKPOINT_SCORING_START()
        TFC_CHECKPOINT_SET_CRITERIA(0)
        TFC_CALL(lbl_802E4CC0)
        TFC_START_PREPARED_WAVE()
        TFC_REST(0)
        TFC_REST(48)
        TFC_REST(48)
        TFC_REST(192)
        TFC_AGBGHOST_BOWARROW_SLIDE_IN(500, 96)
        TFC_REST(192)
        TFC_SET_INPUT_ALLOW_ALL(TRUE)
    TFC_ENDIF()
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80264988)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_CALL(lbl_80264A50)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80264988)
    TFC_CHECKPOINT_SET_CRITERIA(2)
    TFC_CALL(lbl_80264B18)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_CHECKPOINT_SET_CRITERIA(1)
    TFC_CALL(lbl_80264988)
    TFC_CHECKPOINT_SET_CRITERIA(3)
    TFC_CALL(lbl_80264B18)
    TFC_CHECKPOINT_SET_CRITERIA(0)
    TFC_CALL(lbl_802648C0)
    TFC_REST(192)
    TFC_REST(192)
    TFD_CMD(0x044, 1, 0), 0,
    TFC_SET_INPUT_ALLOW_ALL(FALSE)
    TFD_CMD(0x045, 1, 0), 0,
    TFC_CHECKPOINT_SUBMIT_CRITERIA_END(lbl_802EF2B8, "agbGhost", 0)
    TFC_ICI_END("agbGhost", 0)
    TFC_CHECKPOINT_SCORING_STOP()
    TFC_CHECKPOINT_DO_GRADING()
    TFC_FADE_OUT_FRAMES(16)
    TFC_REST_FRAMES(60)
    TFC_CELLANIM_RENDER_EFF_RESET()
    TFC_RESET_SND_GROUP_HEAP_0()
    TFC_RESET_SND_GROUP_HEAP_1()
    TFC_RESET_SND_GROUP_HEAP_2()
    TFC_RESET_SND_GROUP_HEAP_3()
    TFC_SET_GRADING_CAPTION("0301000")
    TFC_CALL(lbl_801F97E0)
    TFC_SET_EPILOGUE_MSG_OK("0301200")
    TFC_SET_EPILOGUE_MSG_TRYAGAIN("0301201")
    TFC_SET_EPILOGUE_MSG_SUPERB("0301202")
    TFC_SET_EPILOGUE("agbGhost", 0)
    TFC_CALL(lbl_801F96A8)
    TFC_100_1()
TFD_STOP()

TFD_BEGIN(lbl_80265368)
    TFC_CATEGORY(0)
    TFC_TEMPO(120)
    TFC_SPEED(256)
    TFC_RESET_SND_GROUP_HEAP_0()
    TFC_RESET_SND_GROUP_HEAP_1()
    TFC_RESET_SND_GROUP_HEAP_2()
    TFC_RESET_SND_GROUP_HEAP_3()
    TFC_CALL(lbl_801F92DC)
    TFC_ASYNC_CALL(lbl_8026485C, 0)
    TFC_SET_PROLOGUE("agbGhost", 0)
    TFC_SET_PROLOGUE_JINGLE(PROLOGUE_JINGLE_AGB_SHIROI_OBAKE)
    TFC_CALL(lbl_801F9340)
    TFC_SET_SCENE_VER(eScene_AgbGhost, 0)
    TFC_SET_SCENE(eScene_AgbGhost, lbl_80264BE0)
TFD_STOP()
